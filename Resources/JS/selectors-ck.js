/* - *///-- Variable Declarations  -- //
var initHTML,initiated,scenario,curScreen,carType,fvd,lg,attractTimer,attractVis=!1,bCanClick,idleInterval,bStarted;$(function(){if(!initiated){console.log("Init");initHTML=$(document.body).html();initiated=!0}$("*").clear();loadIdle();curScreen=0;startAnim();bCanClick=!0;idleInterval=setInterval(timeOut,9e4);bStarted=!1});$("*").on("click",function(){console.log("Reset Idle");clearInterval(idleInterval);idleInterval=setInterval(timeOut,9e4)});var timeOut=function(){if(bStarted){try{var e=$("#dialog").dialog("isOpen")}catch(t){var e=!1}console.log("isOpen: ",e);if(!e){clearInterval(idleInterval);idleInterval=setInterval(timeOut,15e3);$("#dialog").dialog({resizable:!1,draggable:!1,hide:"fade",show:"drop",modal:!0,open:function(e,t){$(".ui-dialog-titlebar-close").hide()},buttons:{"Yes!":function(){$(this).dialog("close");clearInterval(idleInterval);idleInterval=setInterval(timeOut,9e4)}}})}else{clearInterval(idleInterval);hardReset()}}},startAnim=function(){$("#attractLoop").tween({opacity:{start:100,stop:0,time:0,duration:.4,effect:"easeInOut",onStop:function(){attractTimer=setInterval(function(){attract()},4500);attractLoopShow()}}}).play();$("#attractLoop").slideUp(500)},attract=function(){attractVis?attractLoopHide():attractLoopShow()},attractLoopHide=function(){attractVis=!1;$(".scenarioSelectBtn").each(function(e,t){$(this).tween({opacity:{start:100,stop:0,time:3+e/1-.5*e,duration:.25,effect:"easeInOut"},transform:{start:"rotate(0deg) scale( 1 )",stop:"rotate(720deg) scale( 0.1 )",time:3+e/1-.5*e,duration:1,effect:"elasticOut"}}).play()})},attractLoopShow=function(){attractVis=!0;$(".scenarioSelectBtn").each(function(e,t){$(this).tween({opacity:{start:0,stop:100,time:.5+e/1-.35*e,duration:.25,effect:"easeInOut"},transform:{start:"rotate(0deg) scale( 0.1 )",stop:"rotate(720deg) scale( 1 )",time:.5+e/1-.35*e,duration:1,effect:"elasticOut"}}).play()})};$(".scenarioSelectBtn").click(function(e){if($(this).css("opacity")>=.75&&bCanClick){bCanClick=!1;bStarted=!0;clearInterval(attractTimer);scenario=$(this).attr("category");console.log("Hit Select Btn: ",scenario);curScreen=1;$("#screenContainer").tween({opacity:{start:100,stop:0,time:0,duration:.5,effect:"sineOut"},onStop:function(e){$("#scenarioSelect").remove();$(".title").remove();loadScenario()}}).play()}});var bindNextBtn=function(){$(".nextBtn").click(function(e){if(bCanClick){bCanClick=!1;if($(this).hasClass("economy")){console.log("Economy");carType="Economy"}else if($(this).hasClass("midsize")){console.log("Midsized");carType="Midsized"}else if($(this).hasClass("luxury")){console.log("Luxury");carType="Luxury"}console.log("NEXT Clicked");curScreen++;curScreen==4?hardReset():loadScenario()}})},initGraph=function(){switch(scenario){case"savings":lg=new savingsGraph("#chart",fvd);break;case"couch":lg=new cardGraph("#chart",fvd);break;case"car":lg=new carGraph("#chart",carType);break;case"lottery":lg=new Chart("#chart",fvd);$("svg").css("padding","0.5em");$(".nextBtnFake").click(function(e){$(".screenText").tween({opacity:{start:100,stop:0,time:0,duration:.25,effect:"sineOut"},onStop:function(e){$(".screenText").remove()}}).play();$(".nextBtnFake").tween({opacity:{start:100,stop:0,time:0,duration:.25,effect:"sineOut"},onStop:function(e){$(".nextBtnFake").remove()}}).play();$(".overlay").tween({opacity:{start:100,stop:0,time:0,duration:.25,effect:"sineOut"},onStop:function(e){$(".overlay").remove()}}).play()})}},hardReset=function(){clearInterval(attractTimer);bStarted=!1;$(document.body).empty().append(initHTML)},loadIdle=function(){$("#loadIdle").tween({fontSize:{start:100,stop:110,time:0,duration:.5,units:"px",effect:"cubicIn"},onStop:function(e){$("#loadIdle").tween({fontSize:{start:110,stop:100,time:0,duration:.5,units:"px",effect:"cubicOut"},onStop:function(e){loadIdle()}}).play()}}).play()},loadScenario=function(){switch(scenario){case"couch":$("#screenContainer").load("couch.html #couch_screen"+curScreen,function(){console.log("LOAD COUCH.HTML");animateScenario();if(curScreen==1)$("#screenContainer").addClass("couch1");else if(curScreen==2){$("#screenContainer").removeClass("couch1");$("#screenContainer").addClass("couch2")}else if(curScreen==3){$("#screenContainer").removeClass("couch2");$("#screenContainer").addClass("couch3")}});break;case"car":$("#screenContainer").load("car.html #car_screen"+curScreen,function(){console.log("LOAD CAR.HTML");animateScenario();if(curScreen==1)$("#screenContainer").addClass("car1");else if(curScreen==2){$("#screenContainer").removeClass("car1");$("#screenContainer").addClass("car2")}else if(curScreen==3){$("#screenContainer").removeClass("car2");$("#screenContainer").addClass("car3")}});break;case"savings":$("#screenContainer").load("saving.html #saving_screen"+curScreen,function(){console.log("LOAD SAVING.HTML");animateScenario();if(curScreen==1)$("#screenContainer").addClass("save1");else if(curScreen==2){$("#screenContainer").removeClass("save1");$("#screenContainer").addClass("save2")}else if(curScreen==3){$("#screenContainer").removeClass("save2");$("#screenContainer").addClass("save3")}});break;case"lottery":console.log("lottery");$("#screenContainer").load("lottery.html #lottery_screen"+curScreen,function(){console.log("LOAD LOTTERY.HTML");animateScenario();if(curScreen==1)$("#screenContainer").addClass("lotto1");else if(curScreen==2){$("#screenContainer").removeClass("lotto1");$("#screenContainer").addClass("lotto2")}else if(curScreen==3){$("#screenContainer").removeClass("lotto2");$("#screenContainer").addClass("lotto3")}})}},animateScenario=function(){if(curScreen==3){initGraph();var e=$(".nextBtn .done").length;e--;$(".nextBtn .done").each(function(t,n){$(this).tween({opacity:{start:0,stop:100,time:parseFloat($(this).attr("time")),duration:.5,effect:"sineOut"},onStop:function(n){t==e&&bindNextBtn()}}).play()})}if(curScreen==1){$("#screenContainer").tween({opacity:{start:0,stop:100,time:0,duration:.5,effect:"sineOut"}}).play();$(".comicImg").tween({opacity:{start:0,stop:100,time:0,duration:.5,effect:"sineOut"},height:{start:0,stop:768,time:0,units:"px",duration:.5,effect:"sineOut"},top:{start:1025,stop:0,time:0,units:"px",duration:.5,effect:"sineOut"}})}else if(curScreen==2){$(".fadeImg").tween({opacity:{start:100,stop:0,time:0,duration:1,effect:"sineOut"}}).play();$(".comicImg").tween({opacity:{start:0,stop:100,time:0,duration:1,effect:"sineOut"},height:{start:768,stop:768,time:0,units:"px",duration:0,effect:"sineOut"},top:{start:0,stop:0,time:0,units:"px",duration:0,effect:"sineOut"}})}$(".circleText").each(function(e,t){$(this).tween({opacity:{start:0,stop:100,time:parseFloat($(this).attr("time")),duration:.25,effect:"easeInOut"},transform:{start:"rotate(0deg) scale( 0.1 )",stop:"rotate(720deg) scale( 1 )",time:parseFloat($(this).attr("time")),duration:1,effect:"elasticOut"}}).play()});$(".dialog").each(function(e,t){var n=$(this),r=getTargetAnim(n);console.log("anim.timing");console.log(r.timing);$(this).css("top",r.top+"px");$(this).tween({left:{start:1280,stop:r.left,time:parseFloat(r.timing),units:"px",duration:1,effect:"sineOut"},onStop:function(e){}}).play()});var e=$(".nextBtn").length;e--;$(".nextBtn").each(function(t,n){$(this).tween({opacity:{start:0,stop:100,time:parseFloat($(this).attr("time")),duration:.5,effect:"sineOut"},onStop:function(n){if(t==e){bindNextBtn();bCanClick=!0}}}).play()})},getTargetAnim=function(e){var t=e.attr("anim");return JSON.parse(t)};